base .html prhlr ka
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}IELTS Test App{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <header>
        <h1>IELTS Test Application</h1>
    </header>
    <main>
        {% block content %}{% endblock %}
    </main>
    <footer>
        <p>&copy; 2024 IELTS Test App</p>
    </footer>
</body>
</html>
-------------------------------------------------------------------
academic .html
<!-- {% extends 'base.html' %}

{% block title %}Academic Test{% endblock %}

{% block content %}
<h2>Academic IELTS Test</h2>
<div>
    <a class="button">Reading</a>
    <a href="{{ url_for('writing') }}" class="button">Writing</a>
    <a class="button">Listening</a>
    <a class="button">Speaking</a>
</div>
<a href="{{ url_for('home') }}" class="button">Back to Home</a>
{% endblock %} -->
-------------------------------------------------------------------------
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}IELTS Test{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div id="content">
        <div id="chatbox">
            <div id="messages">
                <!-- Display the first question here -->
                <div><strong>Assistant:</strong> {{ firstquestion }}</div>
            </div>
            <input type="text" id="user-input" placeholder="Type your message...">
            <button onclick="sendMessage()">Send</button>
        </div>
        {% block content %}{% endblock %}
    </div>

    <script>

    // function submitAnswer() {
    //     const userAnswer = document.getElementById('user-answer').value;

    //     fetch('/submit_answer', {
    //         method: 'POST',
    //         headers: {
    //             'Content-Type': 'application/json'
    //         },
    //         body: JSON.stringify({ answer: userAnswer })
    //     })
    //     .then(response => response.json())
    //     .then(data => {
    //         document.getElementById("content").innerHTML = `
    //             <h2>Rating</h2>
    //             <p>${data.rating}</p>
    //             <a href="{{ url_for('academic') }}" class="button" data-load>Back to Academic</a>
    //         `;
    //         localStorage.removeItem('chatHistory'); // Clear chat history after submission
    //     });
    // }
        document.addEventListener("DOMContentLoaded", function() {
    document.querySelectorAll("a[data-load]").forEach(link => {
        link.addEventListener("click", function(event) {
            event.preventDefault();
            const url = this.href;
            const pageName = this.innerText;
            sendNavigationMessage(pageName); // Send the navigation message
            loadPage(url);
        });
    });
    loadChatHistory();
});

function loadPage(url) {
    fetch(url)
        .then(response => response.text())
        .then(data => {
            document.getElementById("content").innerHTML = data;
            document.querySelectorAll("a[data-load]").forEach(link => {
                link.addEventListener("click", function(event) {
                    event.preventDefault();
                    const url = this.href;
                    const pageName = this.innerText;
                    sendNavigationMessage(pageName); // Send the navigation message
                    loadPage(url);
                });
            });
            loadChatHistory();
        });
}

function sendNavigationMessage(pageName) {
    fetch('/get_assistance', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ message: `User navigated to ${pageName}` })
    })
    .then(response => response.json())
    .then(data => {
        const messagesDiv = document.getElementById('messages');
        messagesDiv.innerHTML += `<div><strong>Assistant:</strong> ${data.question}</div>`;
        saveChatHistory(); // Save chat history
    });
}

    </script>
</body>
</html>

-----------------------------
        document.addEventListener("DOMContentLoaded", function() {
    document.querySelectorAll("a[data-load]").forEach(link => {
        link.addEventListener("click", function(event) {
            event.preventDefault();
            const url = this.href;
            const pageName = this.innerText;
            sendNavigationMessage(pageName); // Send the navigation message
            loadPage(url);
        });
    });
    loadChatHistory();
});

function loadPage(url) {
    fetch(url)
        .then(response => response.text())
        .then(data => {
            document.getElementById("content").innerHTML = data;
            document.querySelectorAll("a[data-load]").forEach(link => {
                link.addEventListener("click", function(event) {
                    event.preventDefault();
                    const url = this.href;
                    const pageName = this.innerText;
                    sendNavigationMessage(pageName); // Send the navigation message
                    loadPage(url);
                });
            });
            loadChatHistory();
        });
}

function sendNavigationMessage(pageName) {
    fetch('/get_question', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ message: `User navigated to ${pageName}` })
    })
    .then(response => response.json())
    .then(data => {
        const messagesDiv = document.getElementById('messages');
        messagesDiv.innerHTML += `<div><strong>Assistant:</strong> ${data.question}</div>`;
        saveChatHistory(); // Save chat history
    });
}
-------------------------------------------
base.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}IELTS Test{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div id="content">
        <div id="chatbox">
            <div id="messages">
                <!-- Display the first question here -->
                <div><strong>Assistant:</strong> {{ firstquestion }}</div>
            </div>
            <input type="text" id="user-input" placeholder="Type your message...">
            <button onclick="sendMessage()">Send</button>
            <button onclick="clearChat()">Clear Chat</button> <!-- Clear Chat button -->
        </div>
        {% block content %}{% endblock %}
    </div>

    <script>
        function sendMessage() {
            const userMessage = document.getElementById('user-input').value;

            fetch('/get_assistance', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ user_input: userMessage,navigation:null })
            })
            .then(response => response.json())
            .then(data => {
                const messagesDiv = document.getElementById('messages');
                messagesDiv.innerHTML += `<div><strong>You:</strong> ${userMessage}</div>`;
                messagesDiv.innerHTML += `<div><strong>Assistant:</strong> ${data.question}</div>`;
                document.getElementById('user-input').value = ''; // Clear the input field
                saveChatHistory(); // Save chat history
            });
        }

        function submitAnswer() {
            const userAnswer = document.getElementById('user-answer').value;

            fetch('/submit_answer', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ user_input: userAnswer,navigation : null })
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById("content").innerHTML = `
                    <h2>Rating</h2>
                    <p>${data.rating}</p>
                    <a href="{{ url_for('academic') }}" class="button" data-load>Back to Academic</a>
                `;
                localStorage.removeItem('chatHistory'); // Clear chat history after submission
            });
        }
        document.addEventListener("DOMContentLoaded", function() {
    document.querySelectorAll("a[data-load]").forEach(link => {
        link.addEventListener("click", function(event) {
            event.preventDefault();
            const url = this.href;
            const pageName = this.innerText;
            sendNavigationMessage(pageName); // Send the navigation message
            loadPage(url);
        });
    });
    loadChatHistory();
});

function loadPage(url) {
    fetch(url)
        .then(response => response.text())
        .then(data => {
            document.getElementById("content").innerHTML = data;
            document.querySelectorAll("a[data-load]").forEach(link => {
                link.addEventListener("click", function(event) {
                    event.preventDefault();
                    const url = this.href;
                    const pageName = this.innerText;
                    sendNavigationMessage(pageName); // Send the navigation message
                    loadPage(url);
                });
            });
            loadChatHistory();
        });
}

function sendNavigationMessage(pageName) {
    fetch('/get_assistance', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ navigation: `User navigated to ${pageName}`,user_input : null })
    })
    .then(response => response.json())
    .then(data => {
        const messagesDiv = document.getElementById('messages');
        messagesDiv.innerHTML += `<div><strong>Assistant:</strong> ${data.question}</div>`;
        saveChatHistory(); // Save chat history
    });
}
        function loadChatHistory() {
            if (document.getElementById('chatbox')) {
                const chatHistory = localStorage.getItem('chatHistory');
                if (chatHistory) {
                    document.getElementById('messages').innerHTML = chatHistory;
                }
            }
        }

        function saveChatHistory() {
            const messages = document.getElementById('messages').innerHTML;
            localStorage.setItem('chatHistory', messages);
        }

        // Clear chat function
        function clearChat() {
            document.getElementById('messages').innerHTML = ''; // Clear the chat UI
            localStorage.removeItem('chatHistory'); // Remove chat history from local storage
            const messagesDiv = document.getElementById('messages');
            messagesDiv.innerHTML = `<div><strong>Assistant:</strong> Hello fellow student I am AM.AI, your personal language exam assistant. I will be with you all along your Language exams prep. So lets begin, choose an exam you want to excel in ;).</div>`; // Reset the assistant's message
        }
    </script>
</body>
</html>
